<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="static/css/style.css" />

        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h1></h1>

        <div id="entry">
            <input type="hidden" id="participant-id"/>
            Hello <span id="my-name"></span>!<br/>

            <div id="info" style="display:none;">
                Please read the following before you start! Blabla. The purpose of this
                test is to measure your speed in switching between two tasks.
                When you use the system for the first time, you get three practice
                rounds.<br/><br/>
                After that, you'll get to play the actual game..<br/>
                Press space to start practice!
            </div>
        </div>

        <div id="guide" style="display: none;">
        </div>

        <div id="wrapper" style="display: none;">
            <div id="pad"></div>
            <div id="TOP">TOP</div>
            <div id="divider"><hr/></div>
            <div id="BOTTOM">BOTTOM</div>
        </div>

        <div id="result" style="display: none;">
            <p>Results from previous test:</p>
            <div>Hits: <span id="hitsPercentage"></span> %</div>
            <div>RT <span id="reactionTime"></span></div>
            <div>Hits outside timespan <span id="outsideHits"></span></div>

            <div id="taskSwitchingResult" style="display: none;">
                <p>&nbsp;</p>
                <div>Hits repeated: <span id="hitsRepeated"></span> %</div>
                <div>Hits changed: <span id="hitsChanged"></span> %</div>
                <div>RT repeated: <span id="repeatedReactionTime"></span></div>
                <div>RT changed: <span id="changedReactionTime"></span></div>
            </div>
        </div>

        <div id="timingbox" style="display:none"></div>

        <script src="static/lib/jquery-1.9.1.min.js"></script>
        <script src="static/scripts/taskswitching-core.js"></script>
        <script src="static/scripts/taskswitching-ui.js"></script>
        <script src="static/scripts/taskswitching-app.js"></script>
        <script src="static/scripts/taskswitching-auth.js"></script>
        <script src="static/conf/taskswitching-config.js"></script>

        <script>
            var waitForSpace = function() {
                console.log("waiting for space");
                
                $(document).one('keydown', function(e) {
                    if (e.which === 32) {
                        $("#guide").hide();
                        ts.program.init();
                    } else {
                        waitForSpace();
                    }
                });
            }

            $(document).ready(function() {

                $.ajax({
                    url: 'app/whoami',
                    success: function(data, textStatus) {
                        $('#my-name').text(data);
                        $('#participant-id').val(data);
                    },
                    dataType: "text",
                    type: "GET",
                    async: false});

                $("#info").show();

                waitForSpace();
            });
        </script>
    </body>
</html>
